{% extends "base.html" %}

{% block title %}All Tools - SoEasyHub{% endblock %}
{% block description %}Browse all professional online tools for PDF, images, text, and more.{% endblock %}

{% block content %}
<div class="container" style="padding: 4rem 2rem;">
    <div class="tools-page-header" style="text-align: center; margin-bottom: 4rem;">
        <h1 class="playfair" style="font-size: 3.5rem; color: #0f172a; margin-bottom: 1rem;">All Tools</h1>
        <p class="Outfit" style="font-size: 1.2rem; color: #64748b;">Free online tools for all your needs</p>
    </div>

    <div class="tools-layout" style="display: grid; grid-template-columns: 280px 1fr; gap: 3rem;">
        <!-- 左侧分类 -->
        <aside class="categories-sidebar"
            style="background: linear-gradient(135deg, #fff5f0 0%, #ffffff 100%); padding: 2rem; border-radius: 20px; border-left: 4px solid #c2410c; height: fit-content; position: sticky; top: 100px;">
            <h3 class="playfair" style="margin-bottom: 1.5rem; font-size: 1.3rem; color: #0f172a;">Categories</h3>
            <nav class="category-nav"
                style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 2.5rem;">
                <a href="/tools"
                    class="category-link Outfit {% if current_category == 'all' or not current_category %}active{% endif %}"
                    style="padding: 0.75rem 1rem; border-radius: 12px; text-decoration: none; color: #334155; transition: all 0.3s; display: flex; justify-content: space-between; align-items: center;">
                    <span>All Tools</span>
                    <span class="count"
                        style="background: #c2410c; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.85rem; font-weight: 600;">{{
                        total_count }}</span>
                </a>
                {% for category in categories %}
                <a href="/tools?category={{ category.slug }}"
                    class="category-link Outfit {% if current_category == category.slug %}active{% endif %}"
                    style="padding: 0.75rem 1rem; border-radius: 12px; text-decoration: none; color: #334155; transition: all 0.3s; display: flex; justify-content: space-between; align-items: center;">
                    <span>{{ category.name }}</span>
                    <span class="count"
                        style="background: #e2e8f0; color: #475569; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.85rem; font-weight: 600;">{{
                        category.tool_count or 0 }}</span>
                </a>
                {% endfor %}
            </nav>

            <!-- 排序 -->
            <div class="sort-section">
                <h3 class="playfair" style="margin-bottom: 1rem; font-size: 1.1rem; color: #0f172a;">Sort By</h3>
                <select id="sort-select" class="sort-select Outfit"
                    style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 12px; background: white; color: #334155; font-size: 0.95rem; cursor: pointer;">
                    <option value="popular">Most Popular</option>
                    <option value="recent">Most Recent</option>
                    <option value="alphabetical">Alphabetical</option>
                </select>
            </div>
        </aside>

        <!-- 右侧工具列表 -->
        <main class="tools-main">
            <div class="tools-grid"
                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 2rem;">
                {% for tool in tools %}
                <div class="tool-card-premium shadow-sm"
                    style="background: #f8fafc; border-radius: 20px; padding: 2.5rem; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid transparent;">
                    <h3 class="playfair" style="font-size: 1.5rem; margin-bottom: 1rem; color: #0f172a;">
                        <a href="/tools/{{ tool.slug }}" style="text-decoration: none; color: inherit;">{{ tool.name
                            }}</a>
                    </h3>
                    <p class="Outfit" style="font-size: 1rem; color: #64748b; margin-bottom: 1.5rem; line-height: 1.6;">
                        {{ tool.short_description or tool.description[:120] }}...
                    </p>
                    {% if tool.categories %}
                    <span class="tool-category Outfit"
                        style="display: inline-block; background: rgba(194, 65, 12, 0.1); color: #c2410c; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; margin-bottom: 1rem; font-weight: 500;">
                        {{ tool.categories.name }}
                    </span>
                    {% endif %}
                    <div style="margin-top: auto;">
                        <a href="/tools/{{ tool.slug }}" class="link-premium Outfit"
                            style="color: #c2410c; text-decoration: none; font-weight: 600; font-size: 0.95rem; display: inline-flex; align-items: center; gap: 0.5rem;">
                            Use Tool <span>→</span>
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </main>
    </div>
</div>
{% endblock %}

{% block extra_head %}
<style>
    .category-link:hover {
        background: rgba(194, 65, 12, 0.05);
        transform: translateX(5px);
    }

    .category-link.active {
        background: rgba(194, 65, 12, 0.1);
        color: #c2410c;
        font-weight: 600;
        border-left: 3px solid #c2410c;
    }

    .category-link.active .count {
        background: #c2410c;
        color: white;
    }

    .tool-card-premium:hover {
        background: white;
        transform: translateY(-10px);
        box-shadow: 0 30px 60px -12px rgba(15, 23, 42, 0.12);
        border-color: rgba(194, 65, 12, 0.1);
    }

    .link-premium:hover {
        gap: 0.75rem;
    }

    @media (max-width: 768px) {
        .tools-layout {
            grid-template-columns: 1fr !important;
        }

        .categories-sidebar {
            position: static !important;
        }
    }
</style>
{% endblock %}

{% block extra_scripts %}
<script>
    document.getElementById('sort-select').addEventListener('change', function () {
        const sort = this.value;
        const url = new URL(window.location.href);
        url.searchParams.set('sort', sort);
        window.location.href = url.toString();
    });
</script>
{% endblock %}